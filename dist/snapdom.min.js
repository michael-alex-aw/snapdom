(()=>{var je=Object.defineProperty;var G=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var pe=(e,t,r)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,k=(e,t)=>{for(var r in t||(t={}))he.call(t,r)&&pe(e,r,t[r]);if(G)for(var r of G(t))ge.call(t,r)&&pe(e,r,t[r]);return e};var oe=(e,t)=>{var r={};for(var s in e)he.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&G)for(var s of G(e))t.indexOf(s)<0&&ge.call(e,s)&&(r[s]=e[s]);return r};var h=(e,t,r)=>new Promise((s,i)=>{var n=a=>{try{d(r.next(a))}catch(o){i(o)}},c=a=>{try{d(r.throw(a))}catch(o){i(o)}},d=a=>a.done?s(a.value):Promise.resolve(a.value).then(n,c);d((r=r.apply(e,t)).next())});var l={image:new Map,background:new Map,resource:new Map,defaultStyle:new Map,baseStyle:new Map,computedStyle:new WeakMap,font:new Set,snapshot:new WeakMap,snapshotKey:new Map,preStyleMap:new Map,preStyle:new WeakMap,preNodeMap:new Map,reset:Oe};function Oe(){l.computedStyle=new WeakMap,l.snapshot=new WeakMap,l.snapshotKey.clear(),l.preStyleMap.clear(),l.preStyle=new WeakMap,l.preNodeMap.clear()}var _e=["div","span","p","a","img","ul","li","button","input","select","textarea","label","section","article","header","footer","nav","main","aside","h1","h2","h3","h4","h5","h6","svg","path","circle","rect","line","g","table","thead","tbody","tr","td","th"];function ye(){for(let e of _e)we(e)}function we(e){if(l.defaultStyle.has(e))return l.defaultStyle.get(e);if(new Set(["script","style","meta","link","noscript","template"]).has(e)){let c={};return l.defaultStyle.set(e,c),c}let r=document.getElementById("snapdom-sandbox");r||(r=document.createElement("div"),r.id="snapdom-sandbox",r.style.position="absolute",r.style.left="-9999px",r.style.top="-9999px",r.style.width="0",r.style.height="0",r.style.overflow="hidden",document.body.appendChild(r));let s=document.createElement(e);s.style.all="initial",r.appendChild(s);let i=getComputedStyle(s),n={};for(let c of i)n[c]=i.getPropertyValue(c);return r.removeChild(s),l.defaultStyle.set(e,n),n}function O(e,t,r=!1){let s=[],i=we(t);for(let[n,c]of Object.entries(e))if(!r)c&&s.push(`${n}:${c}`);else{let d=i[n];c&&c!==d&&s.push(`${n}:${c}`)}return s.sort().join(";")}function xe(e){let t=new Set;return e.nodeType!==Node.ELEMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE?[]:(e.tagName&&t.add(e.tagName.toLowerCase()),typeof e.querySelectorAll=="function"&&e.querySelectorAll("*").forEach(r=>t.add(r.tagName.toLowerCase())),Array.from(t))}function Se(e){let t=new Map;for(let s of e){let i=l.defaultStyle.get(s);if(!i)continue;let n=Object.entries(i).map(([c,d])=>`${c}:${d};`).sort().join("");t.has(n)||t.set(n,[]),t.get(n).push(s)}let r="";for(let[s,i]of t.entries())r+=`${i.join(",")} { ${s} }
`;return r}function be(){let e=new Set(l.preStyleMap.values()),t=new Map,r=1;for(let s of e)t.set(s,`c${r++}`);return t}function B(r){return h(this,arguments,function*(e,t={}){let s=_(e),i=/^((repeating-)?(linear|radial|conic)-gradient)\(/i.test(e);if(s){let n=J(s);if(l.background.has(n))return t.skipInline?void 0:`url(${l.background.get(n)})`;{let c=yield L(n,{useProxy:t.useProxy});return l.background.set(n,c),t.skipInline?void 0:`url("${c}")`}}return e})}function U(e,{fast:t=!1}={}){if(t)return e();"requestIdleCallback"in window?requestIdleCallback(e,{timeout:50}):setTimeout(e,1)}function N(e,t=null){if(!(e instanceof Element))return window.getComputedStyle(e,t);let r=l.computedStyle.get(e);if(r||(r=new Map,l.computedStyle.set(e,r)),!r.has(t)){let s=window.getComputedStyle(e,t);r.set(t,s)}return r.get(t)}function Ce(e){let t=e.replace(/^['"]|['"]$/g,"");if(t.startsWith("\\"))try{return String.fromCharCode(parseInt(t.replace("\\",""),16))}catch(r){return t}return t}function _(e){let t=e.match(/url\((['"]?)(.*?)(\1)\)/);if(!t)return null;let r=t[2].trim();return r.startsWith("#")?null:r}function L(e,{timeout:t=3e3,useProxy:r=""}={}){function s(o){try{return new URL(o,window.location.href).origin===window.location.origin?"use-credentials":"anonymous"}catch(f){return"anonymous"}}function i(o){return h(this,null,function*(){let f=u=>fetch(u,{mode:"cors",credentials:s(u)==="use-credentials"?"include":"omit"}).then(p=>p.blob()).then(p=>new Promise((m,g)=>{let w=new FileReader;w.onloadend=()=>{let x=w.result;if(typeof x!="string"||!x.startsWith("data:image/")){g(new Error("Invalid image data URL"));return}m(x)},w.onerror=()=>g(new Error("FileReader error")),w.readAsDataURL(p)}));try{return yield f(o)}catch(u){if(r&&typeof r=="string"){let p=r.replace(/\/$/,"")+"/"+J(o);try{return yield f(p)}catch(m){throw new Error("[SnapDOM - fetchImage] CORS restrictions prevented image capture (even via proxy)")}}else throw new Error("[SnapDOM - fetchImage] Fetch fallback failed and no proxy provided")}})}let n=s(e);if(l.image.has(e))return Promise.resolve(l.image.get(e));if(e.startsWith("data:image/"))return l.image.set(e,e),Promise.resolve(e);let d=e+(e.includes("?")?"&":"?")+`v=${Date.now()}`;return/\.svg(\?.*)?$/i.test(e)?h(null,null,function*(){try{let f=yield(yield fetch(d,{mode:"cors",credentials:n==="use-credentials"?"include":"omit"})).text(),u=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(f)}`;return l.image.set(e,u),u}catch(o){return i(d)}}):new Promise((o,f)=>{let u=setTimeout(()=>{f(new Error("[SnapDOM - fetchImage] Image load timed out"))},t),p=new Image;p.crossOrigin=n,p.onload=()=>h(null,null,function*(){clearTimeout(u);try{yield p.decode();let m=document.createElement("canvas");m.width=p.width,m.height=p.height,m.getContext("2d").drawImage(p,0,0,m.width,m.height);let w=m.toDataURL("image/png");l.image.set(e,w),o(w)}catch(m){try{let g=yield i(d);l.image.set(e,g),o(g)}catch(g){f(g)}}}),p.onerror=()=>h(null,null,function*(){clearTimeout(u),console.error(`[SnapDOM - fetchImage] Image failed to load: ${e}`);try{let m=yield i(d);l.image.set(e,m),o(m)}catch(m){f(m)}}),p.src=d})}function ae(e){let t={};for(let r of e)t[r]=e.getPropertyValue(r);return t}function Ee(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function ve(e){if(!e||e==="none")return"";let t=e.replace(/translate[XY]?\([^)]*\)/g,"");return t=t.replace(/matrix\(([^)]+)\)/g,(r,s)=>{let i=s.split(",").map(n=>n.trim());return i.length!==6?`matrix(${s})`:(i[4]="0",i[5]="0",`matrix(${i.join(", ")})`)}),t=t.replace(/matrix3d\(([^)]+)\)/g,(r,s)=>{let i=s.split(",").map(n=>n.trim());return i.length!==16?`matrix3d(${s})`:(i[12]="0",i[13]="0",`matrix3d(${i.join(", ")})`)}),t.trim().replace(/\s{2,}/g," ")}function J(e){if(/%[0-9A-Fa-f]{2}/.test(e))return e;try{return encodeURI(e)}catch(t){return e}}function D(e){let t=[],r=0,s=0;for(let i=0;i<e.length;i++){let n=e[i];n==="("&&r++,n===")"&&r--,n===","&&r===0&&(t.push(e.slice(s,i).trim()),s=i+1)}return t.push(e.slice(s).trim()),t}function Ve(e){let t={};for(let r=0;r<e.length;r++){let s=e[r],i=e.getPropertyValue(s);(s==="background-image"||s==="content")&&i.includes("url(")&&!i.includes("data:")&&(i="none"),t[s]=i}return t}function Q(e,t,r){var a;if(e.tagName==="STYLE")return;l.preStyle.has(e)||l.preStyle.set(e,N(e));let s=l.preStyle.get(e);if(!l.snapshot.has(e)){let o=Ve(s);l.snapshot.set(e,o)}let i=l.snapshot.get(e),n=Object.entries(i).sort(([o],[f])=>o.localeCompare(f)).map(([o,f])=>`${o}:${f}`).join(";");if(l.snapshotKey.has(n)){l.preStyleMap.set(t,l.snapshotKey.get(n));return}let c=((a=e.tagName)==null?void 0:a.toLowerCase())||"div",d=O(i,c,r);l.snapshotKey.set(n,d),l.preStyleMap.set(t,d)}function V(e,t,r={},s){var d,a;if(!e)throw new Error("Invalid node");let i=new Set,n=null;if(e.nodeType===Node.TEXT_NODE||e.nodeType!==Node.ELEMENT_NODE)return e.cloneNode(!0);if(e.getAttribute("data-capture")==="exclude"){let o=document.createElement("div"),f=e.getBoundingClientRect();return o.style.cssText=`display:inline-block;width:${f.width}px;height:${f.height}px;visibility:hidden;`,o}if(r.exclude&&Array.isArray(r.exclude))for(let o of r.exclude)try{if((d=e.matches)!=null&&d.call(e,o)){let f=document.createElement("div"),u=e.getBoundingClientRect();return f.style.cssText=`display:inline-block;width:${u.width}px;height:${u.height}px;visibility:hidden;`,f}}catch(f){console.warn(`Invalid selector in exclude option: ${o}`,f)}if(typeof r.filter=="function")try{if(!r.filter(e,s||e)){let o=document.createElement("div"),f=e.getBoundingClientRect();return o.style.cssText=`display:inline-block;width:${f.width}px;height:${f.height}px;visibility:hidden;`,o}}catch(o){console.warn("Error in filter function:",o)}if(e.tagName==="IFRAME"){let o=document.createElement("div");return o.style.cssText=`width:${e.offsetWidth}px;height:${e.offsetHeight}px;background-image:repeating-linear-gradient(45deg,#ddd,#ddd 5px,#f9f9f9 5px,#f9f9f9 10px);display:flex;align-items:center;justify-content:center;font-size:12px;color:#555;border:1px solid #aaa;`,o}if(e.getAttribute("data-capture")==="placeholder"){let o=e.cloneNode(!1);l.preNodeMap.set(o,e),Q(e,o,t);let f=document.createElement("div");return f.textContent=e.getAttribute("data-placeholder-text")||"",f.style.cssText="color:#666;font-size:12px;text-align:center;line-height:1.4;padding:0.5em;box-sizing:border-box;",o.appendChild(f),o}if(e.tagName==="CANVAS"){let o=e.toDataURL(),f=document.createElement("img");return f.src=o,f.width=e.width,f.height=e.height,l.preNodeMap.set(f,e),Q(e,f,t),f}let c;try{c=e.cloneNode(!1),l.preNodeMap.set(c,e)}catch(o){throw console.error("[Snapdom] Failed to clone node:",e,o),o}if(e instanceof HTMLTextAreaElement){c.textContent=e.value,c.value=e.value;let o=e.getBoundingClientRect();return c.style.width=`${o.width}px`,c.style.height=`${o.height}px`,c}if(e instanceof HTMLInputElement&&(c.value=e.value,c.setAttribute("value",e.value),e.checked!==void 0&&(c.checked=e.checked,e.checked&&c.setAttribute("checked",""),e.indeterminate&&(c.indeterminate=e.indeterminate))),e instanceof HTMLSelectElement&&(n=e.value),Q(e,c,t),e.shadowRoot)if(Array.from(e.shadowRoot.querySelectorAll("slot")).length>0){for(let f of e.shadowRoot.childNodes)if(f.nodeType===Node.ELEMENT_NODE&&f.tagName==="STYLE"){let u=f.textContent||"";u.trim()&&t&&(l.preStyle||(l.preStyle=new WeakMap),l.preStyle.set(f,u))}}else{let f=document.createDocumentFragment();for(let u of e.shadowRoot.childNodes){if(u.nodeType===Node.ELEMENT_NODE&&u.tagName==="STYLE"){let m=u.textContent||"";m.trim()&&t&&(l.preStyle||(l.preStyle=new WeakMap),l.preStyle.set(u,m));continue}let p=V(u,t,r,s||e);p&&f.appendChild(p)}c.appendChild(f)}if(e.tagName==="SLOT"){let o=((a=e.assignedNodes)==null?void 0:a.call(e,{flatten:!0}))||[],f=o.length>0?o:Array.from(e.childNodes),u=document.createDocumentFragment();for(let p of f){let m=V(p,t,r,s||e);m&&u.appendChild(m)}return u}for(let o of e.childNodes){if(i.has(o))continue;let f=V(o,t,r,s||e);f&&c.appendChild(f)}if(n!==null&&c instanceof HTMLSelectElement){c.value=n;for(let o of c.options)o.value===n?o.setAttribute("selected",""):o.removeAttribute("selected")}return c}var qe=[/font\s*awesome/i,/material\s*icons/i,/ionicons/i,/glyphicons/i,/feather/i,/bootstrap\s*icons/i,/remix\s*icons/i,/heroicons/i,/layui/i,/lucide/i],re=[];function $e(e){let t=Array.isArray(e)?e:[e];for(let r of t)r instanceof RegExp?re.push(r):typeof r=="string"?re.push(new RegExp(r,"i")):console.warn("[snapdom] Ignored invalid iconFont value:",r)}function v(e){let t=typeof e=="string"?e:"",r=[...qe,...re];for(let s of r)if(s instanceof RegExp&&s.test(t))return!0;return!!(/icon/i.test(t)||/glyph/i.test(t)||/symbols/i.test(t)||/feather/i.test(t)||/fontawesome/i.test(t))}function ke(e,t,r,s=32,i="#000"){return h(this,null,function*(){t=t.replace(/^['"]+|['"]+$/g,"");let n=window.devicePixelRatio||1,d=document.createElement("canvas").getContext("2d");d.font=r?`${r} ${s}px "${t}"`:`${s}px "${t}"`;let a=d.measureText(e),o=a.actualBoundingBoxAscent||s*.8,f=a.actualBoundingBoxDescent||s*.2,u=o+f,p=a.width,m=document.createElement("canvas");m.width=Math.ceil(p*n),m.height=Math.ceil(u*n);let g=m.getContext("2d");return g.scale(n,n),g.font=d.font,g.textAlign="left",g.textBaseline="alphabetic",g.fillStyle=i,g.fillText(e,0,o),m.toDataURL()})}function Ie(e){return Array.from(document.styleSheets).some(t=>t.href===e)}function He(e){return new Promise(t=>{if(Ie(e))return t(null);let r=document.createElement("link");r.rel="stylesheet",r.href=e,r.setAttribute("data-snapdom","injected-import"),r.onload=()=>t(r),r.onerror=()=>t(null),document.head.appendChild(r)})}function Z(){return h(this,arguments,function*({preCached:e=!1}={}){if(l.resource.has("fonts-embed-css")){if(e){let n=document.createElement("style");n.setAttribute("data-snapdom","embedFonts"),n.textContent=l.resource.get("fonts-embed-css"),document.head.appendChild(n)}return l.resource.get("fonts-embed-css")}let t=/@import\s+url\(["']?([^"')]+)["']?\)/g,r=[];for(let n of document.querySelectorAll("style")){let c=n.textContent||"",d=Array.from(c.matchAll(t));for(let a of d){let o=a[1];v(o)||Ie(o)||r.push(o)}}yield Promise.all(r.map(He));let s=Array.from(document.querySelectorAll('link[rel="stylesheet"]')).filter(n=>n.href),i="";for(let n of s)try{let d=yield(yield fetch(n.href)).text();if(v(n.href)||v(d))continue;let a=/url\((["']?)([^"')]+)\1\)/g,o=yield Promise.all(Array.from(d.matchAll(a)).map(u=>h(null,null,function*(){let p=_(u[0]);if(!p)return null;let m=p;if(!m.startsWith("http")&&!m.startsWith("data:")&&(m=new URL(m,n.href).href),v(m))return null;if(l.resource.has(m))return l.font.add(m),{original:u[0],inlined:`url(${l.resource.get(m)})`};if(l.font.has(m))return null;try{let w=yield(yield fetch(m)).blob(),x=yield new Promise(y=>{let b=new FileReader;b.onload=()=>y(b.result),b.readAsDataURL(w)});return l.resource.set(m,x),l.font.add(m),{original:u[0],inlined:`url(${x})`}}catch(g){return console.warn("[snapdom] Failed to fetch font resource:",m),null}}))),f=d;for(let u of o)u&&(f=f.replace(u.original,u.inlined));i+=f+`
`}catch(c){console.warn("[snapdom] Failed to fetch CSS:",n.href)}for(let n of document.styleSheets)try{if(!n.href||s.every(c=>c.href!==n.href)){for(let c of n.cssRules)if(c.type===CSSRule.FONT_FACE_RULE){let d=c.style.getPropertyValue("src"),a=c.style.getPropertyValue("font-family");if(!d||v(a))continue;let o=/url\((["']?)([^"')]+)\1\)/g,f=/local\((["']?)[^)]+?\1\)/g,u=!!d.match(o),p=!!d.match(f);if(!u&&p){i+=`@font-face{font-family:${a};src:${d};font-style:${c.style.getPropertyValue("font-style")||"normal"};font-weight:${c.style.getPropertyValue("font-weight")||"normal"};}`;continue}let m=d,g=Array.from(d.matchAll(o));for(let w of g){let x=w[2].trim();if(!x)continue;let y=x;if(!y.startsWith("http")&&!y.startsWith("data:")&&(y=new URL(y,n.href||location.href).href),!v(y)){if(l.resource.has(y)){l.font.add(y),m=m.replace(w[0],`url(${l.resource.get(y)})`);continue}if(!l.font.has(y))try{let T=yield(yield fetch(y)).blob(),I=yield new Promise(F=>{let $=new FileReader;$.onload=()=>F($.result),$.readAsDataURL(T)});l.resource.set(y,I),l.font.add(y),m=m.replace(w[0],`url(${I})`)}catch(b){console.warn("[snapdom] Failed to fetch font URL:",y)}}}i+=`@font-face{font-family:${a};src:${m};font-style:${c.style.getPropertyValue("font-style")||"normal"};font-weight:${c.style.getPropertyValue("font-weight")||"normal"};}`}}}catch(c){console.warn("[snapdom] Cannot access stylesheet",n.href,c)}for(let n of document.fonts)if(n.family&&n.status==="loaded"&&n._snapdomSrc){if(v(n.family))continue;let c=n._snapdomSrc;if(!c.startsWith("data:")){if(l.resource.has(n._snapdomSrc))c=l.resource.get(n._snapdomSrc),l.font.add(n._snapdomSrc);else if(!l.font.has(n._snapdomSrc))try{let a=yield(yield fetch(n._snapdomSrc)).blob();c=yield new Promise(o=>{let f=new FileReader;f.onload=()=>o(f.result),f.readAsDataURL(a)}),l.resource.set(n._snapdomSrc,c),l.font.add(n._snapdomSrc)}catch(d){console.warn("[snapdom] Failed to fetch dynamic font src:",n._snapdomSrc);continue}}i+=`@font-face{font-family:'${n.family}';src:url(${c});font-style:${n.style||"normal"};font-weight:${n.weight||"normal"};}`}if(i&&(l.resource.set("fonts-embed-css",i),e)){let n=document.createElement("style");n.setAttribute("data-snapdom","embedFonts"),n.textContent=i,document.head.appendChild(n)}return i})}function se(e,t,r,s=!1,i){return h(this,null,function*(){var d;if(!(e instanceof Element)||!(t instanceof Element))return;for(let a of["::before","::after","::first-letter"])try{let o=N(e,a);if(!o||typeof o[Symbol.iterator]!="function"||o.content==="none"&&o.backgroundImage==="none"&&o.backgroundColor==="transparent"&&(o.borderStyle==="none"||parseFloat(o.borderWidth)===0)&&(!o.transform||o.transform==="none")&&o.display==="inline")continue;if(a==="::first-letter"){let C=getComputedStyle(e);if(!(o.color!==C.color||o.fontSize!==C.fontSize||o.fontWeight!==C.fontWeight))continue;let j=Array.from(t.childNodes).find(me=>{var ue;return me.nodeType===Node.TEXT_NODE&&((ue=me.textContent)==null?void 0:ue.trim().length)>0});if(!j)continue;let fe=j.textContent,ne=fe.match(/^([^\p{L}\p{N}\s]*[\p{L}\p{N}](?:['â€™])?)/u),P=ne==null?void 0:ne[0],Ue=fe.slice((P==null?void 0:P.length)||0);if(!P||/[\uD800-\uDFFF]/.test(P))continue;let X=document.createElement("span");X.textContent=P,X.dataset.snapdomPseudo="::first-letter";let De=ae(o),We=O(De,"span",r);l.preStyleMap.set(X,We);let de=document.createTextNode(Ue);t.replaceChild(de,j),t.insertBefore(X,de);continue}let u=o.content,p=/counter\s*\(|counters\s*\(/.test(u)?"- ":Ce(u),m=o.backgroundImage,g=o.backgroundColor,w=o.fontFamily,x=parseInt(o.fontSize)||32,y=parseInt(o.fontWeight)||!1,b=o.color||"#000",T=o.display,I=parseFloat(o.width),F=parseFloat(o.height),$=o.borderStyle,A=parseFloat(o.borderWidth),W=o.transform,ee=v(w),q=u!=="none"&&p!=="",H=m&&m!=="none",z=g&&g!=="transparent"&&g!=="rgba(0, 0, 0, 0)",M=T!=="inline"&&(I>0||F>0),K=$&&$!=="none"&&A>0,Y=W&&W!=="none";if(!(q||H||z||M||K||Y))continue;let E=document.createElement("span");E.dataset.snapdomPseudo=a;let te=ae(o),Be=O(te,"span",r);if(l.preStyleMap.set(E,Be),ee&&p.length===1){let C=document.createElement("img");C.src=yield ke(p,w,y,x,b),C.style=`width:${x}px;height:auto;object-fit:contain;`,E.appendChild(C)}else if(p.startsWith("url(")){let C=_(p);if(C!=null&&C.trim())try{let R=document.createElement("img"),j=yield L(J(C,{useProxy:i}));R.src=j,R.style=`width:${x}px;height:auto;object-fit:contain;`,E.appendChild(R)}catch(R){console.error(`[snapdom] Error in pseudo ${a} for`,e,R)}}else!ee&&q&&(E.textContent=p);if(H)try{let C=D(m),R=yield Promise.all(C.map(B));E.style.backgroundImage=R.join(", ")}catch(C){console.warn(`[snapdom] Failed to inline background-image for ${a}`,C)}if(z&&(E.style.backgroundColor=g),!(E.childNodes.length>0||((d=E.textContent)==null?void 0:d.trim())!==""||H||z||M||K||Y))continue;a==="::before"?t.insertBefore(E,t.firstChild):t.appendChild(E)}catch(o){console.warn(`[snapdom] Failed to capture ${a} for`,e,o)}let n=Array.from(e.children),c=Array.from(t.children).filter(a=>!a.dataset.snapdomPseudo);for(let a=0;a<Math.min(n.length,c.length);a++)yield se(n[a],c[a],r,s,i)})}function Re(e){if(!e)return;let t=document.querySelectorAll("svg > defs");t.length&&e.querySelectorAll("svg").forEach(r=>{let s=r.querySelectorAll("use");if(!s.length)return;let i=new Set;if(s.forEach(c=>{let d=c.getAttribute("xlink:href")||c.getAttribute("href");d&&d.startsWith("#")&&i.add(d.slice(1))}),!i.size)return;let n=document.createElementNS("http://www.w3.org/2000/svg","defs");for(let c of i)for(let d of t){let a=d.querySelector(`#${CSS.escape(c)}`);if(a){n.appendChild(a.cloneNode(!0));break}}n.childNodes.length&&r.insertBefore(n,r.firstChild)})}function Ne(i){return h(this,arguments,function*(e,t=!1,r=!1,s={}){var d;let n,c="";try{n=V(e,t,s,e)}catch(a){throw console.warn("deepClone failed:",a),a}try{yield se(e,n,t,r,s.useProxy)}catch(a){console.warn("inlinePseudoElements failed:",a)}try{Re(n)}catch(a){console.warn("inlineExternalDef failed:",a)}if(t){let a=be();c=Array.from(a.entries()).map(([o,f])=>`.${f}{${o}}`).join("");for(let[o,f]of l.preStyleMap.entries()){if(o.tagName==="STYLE")continue;let u=a.get(f);u&&o.classList.add(u);let p=(d=o.style)==null?void 0:d.backgroundImage;o.removeAttribute("style"),p&&p!=="none"&&(o.style.backgroundImage=p)}}else for(let[a,o]of l.preStyleMap.entries())a.tagName!=="STYLE"&&a.setAttribute("style",o.replace(/;/g,"; "));for(let[a,o]of l.preNodeMap.entries()){let f=o.scrollLeft,u=o.scrollTop;if((f||u)&&a instanceof HTMLElement){a.style.overflow="hidden",a.style.scrollbarWidth="none",a.style.msOverflowStyle="none";let m=document.createElement("div");for(m.style.transform=`translate(${-f}px, ${-u}px)`,m.style.willChange="transform",m.style.display="inline-block",m.style.width="100%";a.firstChild;)m.appendChild(a.firstChild);a.appendChild(m)}}if(e===l.preNodeMap.get(n)){let a=l.preStyle.get(e)||window.getComputedStyle(e);l.preStyle.set(e,a);let o=ve(a.transform);n.style.margin="0",n.style.position="static",n.style.top="auto",n.style.left="auto",n.style.right="auto",n.style.bottom="auto",n.style.zIndex="auto",n.style.float="none",n.style.clear="none",n.style.transform=o||""}for(let[a,o]of l.preNodeMap.entries())o.tagName==="PRE"&&(a.style.marginTop="0",a.style.marginBlockStart="0");return{clone:n,classCSS:c}})}function Te(r){return h(this,arguments,function*(e,t={}){let s=Array.from(e.querySelectorAll("img")),i=n=>h(null,null,function*(){let c=n.src;try{let d=yield L(c,{useProxy:t.useProxy});n.src=d,n.width||(n.width=n.naturalWidth||100),n.height||(n.height=n.naturalHeight||100)}catch(d){let a=document.createElement("div");a.style=`width: ${n.width||100}px; height: ${n.height||100}px; background: #ccc; display: inline-block; text-align: center; line-height: ${n.height||100}px; color: #666; font-size: 12px;`,a.innerText="img",n.replaceWith(a)}});for(let n=0;n<s.length;n+=4){let c=s.slice(n,n+4).map(i);yield Promise.allSettled(c)}})}function Ae(s,i){return h(this,arguments,function*(e,t,r={}){let n=[[e,t]],c=["background-image","mask","mask-image","-webkit-mask-image","mask-source","mask-box-image-source","mask-border-source","-webkit-mask-box-image-source","border-image","border-image-source","border-image-slice","border-image-width","border-image-outset","border-image-repeat"];for(;n.length;){let[d,a]=n.shift(),o=l.preStyle.get(d)||N(d);l.preStyle.has(d)||l.preStyle.set(d,o);for(let m of c){let g=o.getPropertyValue(m);if(!g||g==="none")continue;let w=D(g),x=yield Promise.all(w.map(y=>B(y,r)));x.some(y=>y&&y!=="none"&&!/^url\(undefined/.test(y))&&a.style.setProperty(m,x.join(", "))}let f=o.getPropertyValue("background-color");f&&f!=="transparent"&&f!=="rgba(0, 0, 0, 0)"&&(a.style.backgroundColor=f);let u=Array.from(d.children),p=Array.from(a.children);for(let m=0;m<Math.min(u.length,p.length);m++)n.push([u[m],p[m]])}})}function Me(r){return h(this,arguments,function*(e,t={}){if(!e)throw new Error("Element cannot be null or undefined");l.reset();let{compress:s=!0,embedFonts:i=!1,fast:n=!0,scale:c=1,useProxy:d=""}=t,a,o,f="",u="",p,m;if({clone:a,classCSS:o}=yield Ne(e,s,i,t),yield new Promise(w=>{U(()=>h(null,null,function*(){yield Te(a,t),w()}),{fast:n})}),yield new Promise(w=>{U(()=>h(null,null,function*(){yield Ae(e,a,t),w()}),{fast:n})}),i&&(yield new Promise(w=>{U(()=>h(null,null,function*(){f=yield Z(),w()}),{fast:n})})),s){let w=xe(a).sort(),x=w.join(",");l.baseStyle.has(x)?u=l.baseStyle.get(x):yield new Promise(y=>{U(()=>{u=Se(w),l.baseStyle.set(x,u),y()},{fast:n})})}yield new Promise(w=>{U(()=>{let x=e.getBoundingClientRect(),y=x.width,b=x.height,T=Number.isFinite(t.width),I=Number.isFinite(t.height),F=typeof c=="number"&&c!==1;if(!F){let M=x.width/x.height;T&&I?(y=t.width,b=t.height):T?(y=t.width,b=y/M):I&&(b=t.height,y=b*M)}if(y=Math.ceil(y),b=Math.ceil(b),a.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),a.style.transformOrigin="top left",!F&&(T||I)){let M=x.width,K=x.height,Y=y/M,le=b/K,E=a.style.transform||"",te=`scale(${Y}, ${le})`;a.style.transform=`${te} ${E}`.trim()}let $="http://www.w3.org/2000/svg",A=document.createElementNS($,"foreignObject");A.setAttribute("width","100%"),A.setAttribute("height","100%");let W=document.createElement("style");W.textContent=u+f+"svg{overflow:visible;}"+o,A.appendChild(W),A.appendChild(a);let q=new XMLSerializer().serializeToString(A);m=`<svg xmlns="${$}" width="${y}" height="${b}" viewBox="0 0 ${y} ${b}">`+q+"</svg>",p=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(m)}`,w()},{fast:n})});let g=document.getElementById("snapdom-sandbox");return g&&g.style.position==="absolute"&&g.remove(),p})}function ze(r){return h(this,arguments,function*(e,{scale:t=1}={}){let s=new Image;return s.src=e,yield s.decode(),t!==1&&(s.style.width=`${s.naturalWidth*t}px`,s.style.height=`${s.naturalHeight*t}px`),s})}function Le(s){return h(this,arguments,function*(e,{dpr:t=1,scale:r=1}={}){let i=new Image;i.src=e,i.crossOrigin="anonymous",i.loading="eager",i.decoding="sync";let n=Ee(),c=!1;if(n&&(document.body.appendChild(i),c=!0),yield i.decode(),n&&(yield new Promise(u=>setTimeout(u,100))),i.width===0||i.height===0)throw c&&i.remove(),new Error("Image failed to load or has no dimensions");let d=i.naturalWidth*r,a=i.naturalHeight*r,o=document.createElement("canvas");o.width=Math.ceil(d*t),o.height=Math.ceil(a*t),o.style.width=`${d}px`,o.style.height=`${a}px`;let f=o.getContext("2d");return f.scale(t,t),f.drawImage(i,0,0,d,a),c&&i.remove(),o})}function Fe(n){return h(this,arguments,function*(e,{type:t="svg",scale:r=1,backgroundColor:s="#fff",quality:i}={}){let c={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",webp:"image/webp"}[t]||"image/png";if(t==="svg"){let a=decodeURIComponent(e.split(",")[1]);return new Blob([a],{type:"image/svg+xml"})}let d=yield ce(e,{dpr:1,scale:r},s);return new Promise(a=>{d.toBlob(o=>a(o),`${c}`,i)})})}function ce(i,n,c){return h(this,arguments,function*(e,{dpr:t=1,scale:r=1},s){let d=yield Le(e,{dpr:t,scale:r});if(!s)return d;let a=document.createElement("canvas");a.width=d.width,a.height=d.height;let o=a.getContext("2d");return o.fillStyle=s,o.fillRect(0,0,a.width,a.height),o.drawImage(d,0,0),a})}function ie(c,d){return h(this,arguments,function*(e,{dpr:t=1,scale:r=1,backgroundColor:s,quality:i},n="png"){let a=["jpg","jpeg","webp"].includes(n)?"#fff":void 0,o=s!=null?s:a,f=yield ce(e,{dpr:t,scale:r},o),u=new Image;return u.src=f.toDataURL(`image/${n}`,i),yield u.decode(),u.style.width=`${f.width/t}px`,u.style.height=`${f.height/t}px`,u})}function Ke(c){return h(this,arguments,function*(e,{dpr:t=1,scale:r=1,backgroundColor:s,format:i="png",filename:n="snapDOM"}={}){if(i==="svg"){let m=yield Fe(e),g=URL.createObjectURL(m),w=document.createElement("a");w.href=g,w.download=`${n}.svg`,w.click(),URL.revokeObjectURL(g);return}let d=["jpg","jpeg","webp"].includes(i)?"#fff":void 0,a=s!=null?s:d,o=yield ce(e,{dpr:t,scale:r},a),f={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",webp:"image/webp"}[i]||"image/png",u=o.toDataURL(f),p=document.createElement("a");p.href=u,p.download=`${n}.${i}`,p.click()})}function S(r){return h(this,arguments,function*(e,t={}){if(t=k({scale:1},t),!e)throw new Error("Element cannot be null or undefined");return t.iconFonts&&$e(t.iconFonts),yield S.capture(e,t)})}S.capture=(r,...s)=>h(null,[r,...s],function*(e,t={}){var d;let i=yield Me(e,t),n=(d=t.dpr)!=null?d:window.devicePixelRatio||1,c=t.scale||1;return{url:i,options:t,toRaw:()=>i,toImg:(a={})=>ze(i,k({dpr:n,scale:c},a)),toCanvas:(a={})=>Le(i,k({dpr:n,scale:c},a)),toBlob:(a={})=>Fe(i,k({dpr:n,scale:c},a)),toPng:(a={})=>ie(i,k({dpr:n,scale:c},a),"png"),toJpg:(a={})=>ie(i,k({dpr:n,scale:c},a),"jpeg"),toWebp:(a={})=>ie(i,k({dpr:n,scale:c},a),"webp"),download:(p={})=>{var m=p,{format:a="png",filename:o="snapDOM",backgroundColor:f}=m,u=oe(m,["format","filename","backgroundColor"]);return Ke(i,k({dpr:n,scale:c,format:a,filename:o,backgroundColor:f},u))}}});S.toRaw=(e,t)=>h(null,null,function*(){return(yield S.capture(e,t)).toRaw()});S.toImg=(e,t)=>h(null,null,function*(){return(yield S.capture(e,t)).toImg()});S.toCanvas=(e,t)=>h(null,null,function*(){return(yield S.capture(e,t)).toCanvas()});S.toBlob=(e,t)=>h(null,null,function*(){return(yield S.capture(e,t)).toBlob(t)});S.toPng=(e,t)=>h(null,null,function*(){return(yield S.capture(e,t)).toPng(t)});S.toJpg=(e,t)=>h(null,null,function*(){return(yield S.capture(e,t)).toJpg(t)});S.toWebp=(e,t)=>h(null,null,function*(){return(yield S.capture(e,t)).toWebp(t)});S.download=(r,...s)=>h(null,[r,...s],function*(e,t={}){let o=t,{format:i="png",filename:n="capture",backgroundColor:c}=o,d=oe(o,["format","filename","backgroundColor"]);return yield(yield S.capture(e,d)).download({format:i,filename:n,backgroundColor:c})});function Pe(){return h(this,arguments,function*(e=document,t={}){let{embedFonts:r=!0,reset:s=!1}=t;if(s){l.reset();return}yield document.fonts.ready,ye();let i=[],n=[];e!=null&&e.querySelectorAll&&(i=Array.from(e.querySelectorAll("img[src]")),n=Array.from(e.querySelectorAll("*")));let c=[];for(let d of i){let a=d.src;l.image.has(a)||c.push(L(a,{useProxy:t.useProxy}).then(o=>l.image.set(a,o)).catch(()=>{}))}for(let d of n){let a=N(d).backgroundImage;if(a&&a!=="none"){let o=D(a);for(let f of o)f.startsWith("url(")&&c.push(B(f,t).catch(()=>{}))}}r&&(yield Z({preCached:!0})),yield Promise.all(c)})}typeof window!="undefined"&&(window.snapdom=S,window.preCache=Pe);})();
